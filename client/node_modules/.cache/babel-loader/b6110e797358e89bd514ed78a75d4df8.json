{"ast":null,"code":"import axios from 'axios';\nimport moment from 'moment';\nimport { takeLatest, all, call, put, select } from 'redux-saga/effects';\nimport CHECKOUT_ACTIONS_TYPE from './check-out.types';\nimport { selectCurrentUser } from '../user/user.selector';\nimport { selectCartItem, selectTotalPrice } from '../cart/cart.selector';\nimport { checkOutSuccess } from './check-out.action';\nexport function fetchBookingToServer(data) {\n  let token = \"Bearer \" + JSON.parse(localStorage.getItem(\"login\"));\n  return axios(`http://localhost:2222/booking`, {\n    method: \"POST\",\n    headers: {\n      'Authorization': token\n    },\n    data: data\n  });\n}\nexport function* checkOut({\n  payload\n}) {\n  const currentUser = yield select(selectCurrentUser);\n  const cartItem = yield select(selectCartItem);\n  const totalMoney = yield select(selectTotalPrice);\n  const data = Object.assign({}, {\n    cart: cartItem,\n    totalMoney,\n    address: payload,\n    idUser: currentUser._id,\n    createAt: `${moment(new Date()).format('MMMM Do YYYY, h:mm:ss a')}`\n  });\n  yield call(fetchBookingToServer, data);\n  yield put(checkOutSuccess());\n}\nexport function* onCheckOutStart() {\n  yield takeLatest(CHECKOUT_ACTIONS_TYPE.CHECK_OUT_START, checkOut);\n}\nexport function* checkOutSagas() {\n  yield all([call(onCheckOutStart)]);\n}","map":{"version":3,"sources":["/Users/thuongle/Desktop/e-ecommerce/client/src/redux/check-out/check-out.sagas.js"],"names":["axios","moment","takeLatest","all","call","put","select","CHECKOUT_ACTIONS_TYPE","selectCurrentUser","selectCartItem","selectTotalPrice","checkOutSuccess","fetchBookingToServer","data","token","JSON","parse","localStorage","getItem","method","headers","checkOut","payload","currentUser","cartItem","totalMoney","Object","assign","cart","address","idUser","_id","createAt","Date","format","onCheckOutStart","CHECK_OUT_START","checkOutSagas"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAAQC,UAAR,EAAoBC,GAApB,EAAyBC,IAAzB,EAA8BC,GAA9B,EAAoCC,MAApC,QAAiD,oBAAjD;AACA,OAAOC,qBAAP,MAAkC,mBAAlC;AACA,SAAQC,iBAAR,QAAgC,uBAAhC;AACA,SAAQC,cAAR,EAAyBC,gBAAzB,QAAgD,uBAAhD;AACA,SAAQC,eAAR,QAA8B,oBAA9B;AAIA,OAAO,SAASC,oBAAT,CAA+BC,IAA/B,EAAqC;AACxC,MAAIC,KAAK,GAAG,YAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAxB;AACA,SAAOlB,KAAK,CAAE,+BAAF,EAAkC;AAC1CmB,IAAAA,MAAM,EAAG,MADiC;AAE1CC,IAAAA,OAAO,EAAG;AACN,uBAAiBN;AADX,KAFgC;AAK1CD,IAAAA,IAAI,EAAGA;AALmC,GAAlC,CAAZ;AAOH;AAID,OAAO,UAAUQ,QAAV,CAAmB;AAACC,EAAAA;AAAD,CAAnB,EAA8B;AACjC,QAAMC,WAAW,GAAG,MAAMjB,MAAM,CAACE,iBAAD,CAAhC;AACA,QAAMgB,QAAQ,GAAG,MAAMlB,MAAM,CAACG,cAAD,CAA7B;AACA,QAAMgB,UAAU,GAAG,MAAMnB,MAAM,CAACI,gBAAD,CAA/B;AACA,QAAMG,IAAI,GAAGa,MAAM,CAACC,MAAP,CAAc,EAAd,EAAmB;AAC5BC,IAAAA,IAAI,EAACJ,QADuB;AAE5BC,IAAAA,UAF4B;AAG5BI,IAAAA,OAAO,EAAEP,OAHmB;AAI5BQ,IAAAA,MAAM,EAAGP,WAAW,CAACQ,GAJO;AAK5BC,IAAAA,QAAQ,EAAG,GAAE/B,MAAM,CAAC,IAAIgC,IAAJ,EAAD,CAAN,CAAmBC,MAAnB,CAA0B,yBAA1B,CAAqD;AALtC,GAAnB,CAAb;AAOA,QAAM9B,IAAI,CAACQ,oBAAD,EAAsBC,IAAtB,CAAV;AACA,QAAMR,GAAG,CAACM,eAAe,EAAhB,CAAT;AACH;AAED,OAAO,UAAUwB,eAAV,GAA6B;AAChC,QAAMjC,UAAU,CAACK,qBAAqB,CAAC6B,eAAvB,EAAwCf,QAAxC,CAAhB;AACH;AAID,OAAO,UAAUgB,aAAV,GAA2B;AAC9B,QAAMlC,GAAG,CAAC,CAACC,IAAI,CAAE+B,eAAF,CAAL,CAAD,CAAT;AACH","sourcesContent":["import axios from 'axios'; \nimport moment from 'moment';\nimport {takeLatest, all, call,put , select} from 'redux-saga/effects';\nimport CHECKOUT_ACTIONS_TYPE from './check-out.types';\nimport {selectCurrentUser} from '../user/user.selector';\nimport {selectCartItem , selectTotalPrice} from '../cart/cart.selector';\nimport {checkOutSuccess} from './check-out.action'\n\n\n\nexport function fetchBookingToServer (data) {\n    let token = \"Bearer \" + JSON.parse(localStorage.getItem(\"login\"));\n    return axios(`http://localhost:2222/booking`, {\n        method : \"POST\",\n        headers : {\n            'Authorization': token\n        }, \n        data : data\n    })\n}\n\n\n\nexport function *checkOut({payload}) {\n    const currentUser = yield select(selectCurrentUser);\n    const cartItem = yield select(selectCartItem);\n    const totalMoney = yield select(selectTotalPrice);\n    const data = Object.assign({} , {\n        cart:cartItem,\n        totalMoney,\n        address: payload,\n        idUser : currentUser._id,\n        createAt: `${moment(new Date()).format('MMMM Do YYYY, h:mm:ss a')}`\n    })\n    yield call(fetchBookingToServer,data);\n    yield put(checkOutSuccess());\n}\n\nexport function *onCheckOutStart () {\n    yield takeLatest(CHECKOUT_ACTIONS_TYPE.CHECK_OUT_START, checkOut)\n}\n\n\n\nexport function* checkOutSagas () {\n    yield all([call (onCheckOutStart)])\n} "]},"metadata":{},"sourceType":"module"}