{"ast":null,"code":"import { takeLatest, call, put, all } from 'redux-saga/effects';\nimport axios from 'axios';\nimport BOOKING_ACTION_TYPES from './booking-types';\nimport { getBookingSuccess } from './booking-action';\n\nfunction handleData(arr) {\n  var fixedData = [];\n  var temp = {};\n\n  for (var i = 0; i < arr.length; i++) {\n    temp._id = arr[i]._id;\n    temp.address = arr[i].address;\n    temp.createAt = arr[i].createAt;\n    temp.phoneNumber = arr[i].idUser.phoneNumber;\n    temp.name = arr[i].idUser.name;\n    temp.totalMoney = arr[i].cart[j]._id.totalMoney;\n\n    for (var j = 0; j < arr[i].cart.length; j++) {\n      temp.idProduct = arr[i].cart[j]._id.idProduct;\n      temp.priceUSD = arr[i].cart[j]._id.priceUSD;\n      temp.origin = arr[i].cart[j]._id.origin;\n      temp.nameEN = arr[i].cart[j]._id.nameEN;\n      temp.nameVN = arr[i].cart[j]._id.nameVN;\n      temp.isCompleted = arr[i].cart[j].isCompleted;\n      temp.weight = arr[i].cart[j]._id.weight;\n      temp.totalWeight = arr[i].cart[j]._id.totalWeight;\n      temp.quantity = arr[i].cart[j].quantity;\n      temp.key = arr[i].cart[j].key;\n      var mark = { ...temp\n      };\n      fixedData.push(mark);\n    }\n  }\n\n  return fixedData;\n}\n\nexport function fetchBookingToServer() {\n  let token = \"Bearer \" + JSON.parse(localStorage.getItem(\"login\"));\n  return axios(`http://localhost:2222/booking`, {\n    method: \"get\",\n    headers: {\n      'Authorization': token\n    }\n  });\n}\nexport function pathBookingToServer(data) {\n  let token = \"Bearer \" + JSON.parse(localStorage.getItem(\"login\"));\n  return axios(`http://localhost:2222/booking`, {\n    method: \"patch\",\n    headers: {\n      'Authorization': token\n    },\n    data: data\n  });\n}\nexport function* getBooking() {\n  const {\n    data: {\n      data: {\n        booking\n      }\n    }\n  } = yield call(fetchBookingToServer);\n  let data = yield call(handleData, booking);\n  yield put(getBookingSuccess(data));\n}\nexport function* updateComplete({\n  payload\n}) {\n  const {\n    data: {\n      data: {\n        booking\n      }\n    }\n  } = yield call(pathBookingToServer, payload);\n  let data = yield call(handleData, booking);\n  yield put(getBookingSuccess(data));\n}\nexport function* onUpdateComplete() {\n  yield takeLatest(BOOKING_ACTION_TYPES.UPDATE_COMPLETE_START, updateComplete);\n}\nexport function* onGetBookingStart() {\n  yield takeLatest(BOOKING_ACTION_TYPES.GET_BOOKING_START, getBooking);\n}\nexport function* bookingSagas() {\n  yield all([call(onGetBookingStart), call(onUpdateComplete)]);\n}","map":{"version":3,"sources":["/Users/thuongle/Desktop/e-ecommerce/client/src/redux/booking/booking-sagas.js"],"names":["takeLatest","call","put","all","axios","BOOKING_ACTION_TYPES","getBookingSuccess","handleData","arr","fixedData","temp","i","length","_id","address","createAt","phoneNumber","idUser","name","totalMoney","cart","j","idProduct","priceUSD","origin","nameEN","nameVN","isCompleted","weight","totalWeight","quantity","key","mark","push","fetchBookingToServer","token","JSON","parse","localStorage","getItem","method","headers","pathBookingToServer","data","getBooking","booking","updateComplete","payload","onUpdateComplete","UPDATE_COMPLETE_START","onGetBookingStart","GET_BOOKING_START","bookingSagas"],"mappings":"AAAA,SAAQA,UAAR,EAAqBC,IAArB,EAA4BC,GAA5B,EAAkCC,GAAlC,QAA6C,oBAA7C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,oBAAP,MAAiC,iBAAjC;AACA,SAASC,iBAAT,QAAkC,kBAAlC;;AAGA,SAASC,UAAT,CAAqBC,GAArB,EAA0B;AACtB,MAAIC,SAAS,GAAG,EAAhB;AACA,MAAIC,IAAI,GAAG,EAAX;;AACA,OAAI,IAAIC,CAAC,GAAG,CAAZ,EAAgBA,CAAC,GAAGH,GAAG,CAACI,MAAxB,EAAgCD,CAAC,EAAjC,EAAsC;AACpCD,IAAAA,IAAI,CAACG,GAAL,GAAWL,GAAG,CAACG,CAAD,CAAH,CAAOE,GAAlB;AACAH,IAAAA,IAAI,CAACI,OAAL,GAAeN,GAAG,CAACG,CAAD,CAAH,CAAOG,OAAtB;AACAJ,IAAAA,IAAI,CAACK,QAAL,GAAgBP,GAAG,CAACG,CAAD,CAAH,CAAOI,QAAvB;AACAL,IAAAA,IAAI,CAACM,WAAL,GAAmBR,GAAG,CAACG,CAAD,CAAH,CAAOM,MAAP,CAAcD,WAAjC;AACAN,IAAAA,IAAI,CAACQ,IAAL,GAAYV,GAAG,CAACG,CAAD,CAAH,CAAOM,MAAP,CAAcC,IAA1B;AACAR,IAAAA,IAAI,CAACS,UAAL,GAAkBX,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeR,GAAf,CAAmBM,UAArC;;AACA,SAAI,IAAIE,CAAC,GAAG,CAAZ,EAAgBA,CAAC,GAAGb,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYR,MAAhC,EAAwCS,CAAC,EAAzC,EAA6C;AAC3CX,MAAAA,IAAI,CAACY,SAAL,GAAiBd,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeR,GAAf,CAAmBS,SAApC;AACAZ,MAAAA,IAAI,CAACa,QAAL,GAAgBf,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeR,GAAf,CAAmBU,QAAnC;AACAb,MAAAA,IAAI,CAACc,MAAL,GAAchB,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeR,GAAf,CAAmBW,MAAjC;AACAd,MAAAA,IAAI,CAACe,MAAL,GAAcjB,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeR,GAAf,CAAmBY,MAAjC;AACAf,MAAAA,IAAI,CAACgB,MAAL,GAAclB,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeR,GAAf,CAAmBa,MAAjC;AACAhB,MAAAA,IAAI,CAACiB,WAAL,GAAmBnB,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeM,WAAlC;AACAjB,MAAAA,IAAI,CAACkB,MAAL,GAAcpB,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeR,GAAf,CAAmBe,MAAjC;AACAlB,MAAAA,IAAI,CAACmB,WAAL,GAAmBrB,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeR,GAAf,CAAmBgB,WAAtC;AACAnB,MAAAA,IAAI,CAACoB,QAAL,GAAgBtB,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeS,QAA/B;AACApB,MAAAA,IAAI,CAACqB,GAAL,GAAWvB,GAAG,CAACG,CAAD,CAAH,CAAOS,IAAP,CAAYC,CAAZ,EAAeU,GAA1B;AACA,UAAIC,IAAI,GAAG,EAAC,GAAGtB;AAAJ,OAAX;AACAD,MAAAA,SAAS,CAACwB,IAAV,CAAeD,IAAf;AACD;AACF;;AACD,SAAOvB,SAAP;AACH;;AAGD,OAAO,SAASyB,oBAAT,GAAgC;AACnC,MAAIC,KAAK,GAAG,YAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAxB;AACA,SAAOnC,KAAK,CAAE,+BAAF,EAAiC;AACzCoC,IAAAA,MAAM,EAAE,KADiC;AAEzCC,IAAAA,OAAO,EAAG;AACN,uBAAiBN;AADX;AAF+B,GAAjC,CAAZ;AAMH;AACD,OAAO,SAASO,mBAAT,CAA6BC,IAA7B,EAAmC;AACtC,MAAIR,KAAK,GAAG,YAAYC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAxB;AACA,SAAOnC,KAAK,CAAE,+BAAF,EAAiC;AACzCoC,IAAAA,MAAM,EAAE,OADiC;AAEzCC,IAAAA,OAAO,EAAG;AACN,uBAAiBN;AADX,KAF+B;AAKzCQ,IAAAA,IAAI,EAAEA;AALmC,GAAjC,CAAZ;AAOH;AAGD,OAAO,UAAUC,UAAV,GAAwB;AAC3B,QAAM;AAACD,IAAAA,IAAI,EAAE;AAACA,MAAAA,IAAI,EAAG;AAACE,QAAAA;AAAD;AAAR;AAAP,MAA6B,MAAM5C,IAAI,CAACiC,oBAAD,CAA7C;AACA,MAAIS,IAAI,GAAG,MAAM1C,IAAI,CAACM,UAAD,EAAYsC,OAAZ,CAArB;AACA,QAAM3C,GAAG,CAACI,iBAAiB,CAACqC,IAAD,CAAlB,CAAT;AACH;AAED,OAAO,UAAUG,cAAV,CAAyB;AAACC,EAAAA;AAAD,CAAzB,EAAoC;AACvC,QAAM;AAACJ,IAAAA,IAAI,EAAE;AAACA,MAAAA,IAAI,EAAG;AAACE,QAAAA;AAAD;AAAR;AAAP,MAA6B,MAAM5C,IAAI,CAACyC,mBAAD,EAAqBK,OAArB,CAA7C;AACA,MAAIJ,IAAI,GAAG,MAAM1C,IAAI,CAACM,UAAD,EAAYsC,OAAZ,CAArB;AACA,QAAM3C,GAAG,CAACI,iBAAiB,CAACqC,IAAD,CAAlB,CAAT;AACH;AAED,OAAO,UAAUK,gBAAV,GAA6B;AAChC,QAAMhD,UAAU,CAACK,oBAAoB,CAAC4C,qBAAtB,EAA6CH,cAA7C,CAAhB;AACH;AAED,OAAO,UAAUI,iBAAV,GAA+B;AAClC,QAAMlD,UAAU,CAACK,oBAAoB,CAAC8C,iBAAtB,EAAwCP,UAAxC,CAAhB;AACH;AAED,OAAO,UAAUQ,YAAV,GAA0B;AAC7B,QAAMjD,GAAG,CAAC,CAACF,IAAI,CAACiD,iBAAD,CAAL,EAAyBjD,IAAI,CAAC+C,gBAAD,CAA7B,CAAD,CAAT;AACH","sourcesContent":["import {takeLatest , call , put , all } from 'redux-saga/effects';\nimport axios from 'axios';\nimport BOOKING_ACTION_TYPES from './booking-types';\nimport { getBookingSuccess } from './booking-action';\n\n\nfunction handleData (arr) {\n    var fixedData = [];\n    var temp = {}\n    for(var i = 0 ; i < arr.length; i ++) {\n      temp._id = arr[i]._id;\n      temp.address = arr[i].address;\n      temp.createAt = arr[i].createAt;\n      temp.phoneNumber = arr[i].idUser.phoneNumber;\n      temp.name = arr[i].idUser.name;\n      temp.totalMoney = arr[i].cart[j]._id.totalMoney;\n      for(var j = 0 ; j < arr[i].cart.length; j++) {\n        temp.idProduct = arr[i].cart[j]._id.idProduct;\n        temp.priceUSD = arr[i].cart[j]._id.priceUSD;\n        temp.origin = arr[i].cart[j]._id.origin;\n        temp.nameEN = arr[i].cart[j]._id.nameEN;\n        temp.nameVN = arr[i].cart[j]._id.nameVN;\n        temp.isCompleted = arr[i].cart[j].isCompleted\n        temp.weight = arr[i].cart[j]._id.weight;\n        temp.totalWeight = arr[i].cart[j]._id.totalWeight;\n        temp.quantity = arr[i].cart[j].quantity;\n        temp.key = arr[i].cart[j].key;\n        var mark = {...temp}\n        fixedData.push(mark);\n      }\n    }\n    return fixedData;\n}\n  \n\nexport function fetchBookingToServer() {\n    let token = \"Bearer \" + JSON.parse(localStorage.getItem(\"login\"));\n    return axios(`http://localhost:2222/booking`,{\n        method: \"get\",\n        headers : {\n            'Authorization': token\n        }, \n    })\n}\nexport function pathBookingToServer(data) {\n    let token = \"Bearer \" + JSON.parse(localStorage.getItem(\"login\"));\n    return axios(`http://localhost:2222/booking`,{\n        method: \"patch\",\n        headers : {\n            'Authorization': token\n        }, \n        data: data\n    })\n}\n\n\nexport function* getBooking () {\n    const {data :{data : {booking}}} = yield call(fetchBookingToServer);\n    let data = yield call(handleData,booking);\n    yield put(getBookingSuccess(data));\n}\n\nexport function* updateComplete({payload}) {\n    const {data :{data : {booking}}} = yield call(pathBookingToServer,payload);\n    let data = yield call(handleData,booking);\n    yield put(getBookingSuccess(data));\n}\n\nexport function* onUpdateComplete() {\n    yield takeLatest(BOOKING_ACTION_TYPES.UPDATE_COMPLETE_START, updateComplete)\n}\n\nexport function* onGetBookingStart () {\n    yield takeLatest(BOOKING_ACTION_TYPES.GET_BOOKING_START,getBooking)\n}\n\nexport function* bookingSagas () {\n    yield all([call(onGetBookingStart),call(onUpdateComplete)])\n}"]},"metadata":{},"sourceType":"module"}