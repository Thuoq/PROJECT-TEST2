{"ast":null,"code":"import { takeLatest, all, call, put } from 'redux-saga/effects';\nimport axios from 'axios';\nimport USER_ACTIONS_TYPES from '../user/user.types';\nimport { setCurrentUser, signOutSuccess } from '../user/user.action';\nexport function fetchUserFormToServer(data, type) {\n  return axios(`http://localhost:2222/user/${type}`, {\n    method: \"post\",\n    data: data\n  });\n}\nexport function* signUp({\n  payload\n}) {\n  const {\n    data: {\n      data: {\n        user\n      }\n    }\n  } = yield call(fetchUserFormToServer, payload, \"register\");\n  yield put(setCurrentUser(user));\n}\nexport function* signIn({\n  payload\n}) {\n  const {\n    data: {\n      data: {\n        user\n      }\n    }\n  } = yield call(fetchUserFormToServer, payload, \"signIn\");\n  yield console.log(\"RUNNN\");\n  yield put(setCurrentUser(user));\n}\nexport function* signOut() {\n  localStorage.removeItem(\"login\");\n  yield put(signOutSuccess());\n}\nexport function* onSignOutStart() {\n  yield takeLatest(USER_ACTIONS_TYPES.SIGN_OUT_START, signOut);\n}\nexport function* onSignUpStart() {\n  yield takeLatest(USER_ACTIONS_TYPES.SIGN_UP_START, signUp);\n}\nexport function* onSignInStart() {\n  yield takeLatest(USER_ACTIONS_TYPES.SIGN_IN_START, signIn);\n}\nexport function* userSagas() {\n  yield all([call(onSignUpStart), call(onSignInStart), call(onSignOutStart)]);\n}","map":{"version":3,"sources":["/Users/thuongle/Desktop/e-ecommerce/client/src/redux/user/user.sagas.js"],"names":["takeLatest","all","call","put","axios","USER_ACTIONS_TYPES","setCurrentUser","signOutSuccess","fetchUserFormToServer","data","type","method","signUp","payload","user","signIn","console","log","signOut","localStorage","removeItem","onSignOutStart","SIGN_OUT_START","onSignUpStart","SIGN_UP_START","onSignInStart","SIGN_IN_START","userSagas"],"mappings":"AAAA,SAAQA,UAAR,EAAoBC,GAApB,EAAyBC,IAAzB,EAA8BC,GAA9B,QAAwC,oBAAxC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,kBAAP,MAA+B,oBAA/B;AACA,SAAQC,cAAR,EAAuBC,cAAvB,QAA4C,qBAA5C;AAEA,OAAO,SAASC,qBAAT,CAAgCC,IAAhC,EAAqCC,IAArC,EAA2C;AAC9C,SAAON,KAAK,CAAE,8BAA6BM,IAAK,EAApC,EAAsC;AAC9CC,IAAAA,MAAM,EAAE,MADsC;AAE9CF,IAAAA,IAAI,EAAEA;AAFwC,GAAtC,CAAZ;AAIH;AAGD,OAAO,UAAWG,MAAX,CAAkB;AAACC,EAAAA;AAAD,CAAlB,EAA6B;AACjC,QAAM;AAACJ,IAAAA,IAAI,EAAG;AAACA,MAAAA,IAAI,EAAG;AAACK,QAAAA;AAAD;AAAR;AAAR,MAA2B,MAAMZ,IAAI,CAACM,qBAAD,EAAuBK,OAAvB,EAA+B,UAA/B,CAA3C;AACA,QAAMV,GAAG,CAACG,cAAc,CAACQ,IAAD,CAAf,CAAT;AACF;AAED,OAAO,UAAUC,MAAV,CAAiB;AAACF,EAAAA;AAAD,CAAjB,EAA4B;AAC/B,QAAM;AAACJ,IAAAA,IAAI,EAAG;AAACA,MAAAA,IAAI,EAAG;AAACK,QAAAA;AAAD;AAAR;AAAR,MAA2B,MAAMZ,IAAI,CAACM,qBAAD,EAAuBK,OAAvB,EAAgC,QAAhC,CAA3C;AACA,QAAMG,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAN;AACA,QAAMd,GAAG,CAACG,cAAc,CAACQ,IAAD,CAAf,CAAT;AACH;AAED,OAAO,UAAUI,OAAV,GAAoB;AACvBC,EAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACA,QAAMjB,GAAG,CAACI,cAAc,EAAf,CAAT;AACH;AAED,OAAO,UAAUc,cAAV,GAA2B;AAC9B,QAAMrB,UAAU,CAACK,kBAAkB,CAACiB,cAApB,EAAoCJ,OAApC,CAAhB;AACH;AAGD,OAAO,UAAUK,aAAV,GAA0B;AAC7B,QAAMvB,UAAU,CAACK,kBAAkB,CAACmB,aAApB,EAAkCZ,MAAlC,CAAhB;AACH;AACD,OAAO,UAAUa,aAAV,GAA0B;AAC7B,QAAMzB,UAAU,CAACK,kBAAkB,CAACqB,aAApB,EAAkCX,MAAlC,CAAhB;AACH;AAED,OAAO,UAAUY,SAAV,GAAsB;AACzB,QAAM1B,GAAG,CAAC,CACNC,IAAI,CAACqB,aAAD,CADE,EAENrB,IAAI,CAACuB,aAAD,CAFE,EAGNvB,IAAI,CAACmB,cAAD,CAHE,CAAD,CAAT;AAKH","sourcesContent":["import {takeLatest, all, call,put} from 'redux-saga/effects';\nimport axios from 'axios';\nimport USER_ACTIONS_TYPES from '../user/user.types';\nimport {setCurrentUser,signOutSuccess} from '../user/user.action';\n\nexport function fetchUserFormToServer (data,type) {\n    return axios(`http://localhost:2222/user/${type}`,{\n        method: \"post\",\n        data: data\n    })\n}\n\n\nexport function * signUp({payload}) {\n   const {data : {data : {user}}} = yield call(fetchUserFormToServer,payload,\"register\");\n   yield put(setCurrentUser(user))\n}\n\nexport function* signIn({payload}) {\n    const {data : {data : {user}}} = yield call(fetchUserFormToServer,payload, \"signIn\");\n    yield console.log(\"RUNNN\")\n    yield put(setCurrentUser(user));\n}\n\nexport function* signOut() {\n    localStorage.removeItem(\"login\")\n    yield put(signOutSuccess())\n}\n\nexport function* onSignOutStart() {\n    yield takeLatest(USER_ACTIONS_TYPES.SIGN_OUT_START, signOut)\n}\n\n\nexport function* onSignUpStart() {\n    yield takeLatest(USER_ACTIONS_TYPES.SIGN_UP_START,signUp);\n}\nexport function* onSignInStart() {\n    yield takeLatest(USER_ACTIONS_TYPES.SIGN_IN_START,signIn)\n}\n\nexport function* userSagas() {\n    yield all([\n        call(onSignUpStart),\n        call(onSignInStart),\n        call(onSignOutStart)\n    ])\n}"]},"metadata":{},"sourceType":"module"}